# This is an example environment file.
# Copy this file to .env and fill in your actual configuration values.
# The .env file is git-ignored and should NOT be committed to source control.

# -----------------------------------------------------------------------------
# SECTION 1: CORE APPLICATION CONFIGURATION (REQUIRED)
# These variables are essential for the server to start and function correctly.
# -----------------------------------------------------------------------------

# The full connection string for your MongoDB instance.
DATABASE_URL="mongodb://user:password@localhost:27017/flutter_news_app_api_server_full_source_code_db"

# A secure, randomly generated secret for signing JSON Web Tokens (JWTs).
JWT_SECRET_KEY="your-super-secret-and-long-jwt-key"

# REQUIRED FOR PRODUCTION: The specific origin URL of your web client (e.g., the dashboard).
# This is critical for allowing the web app to make requests to the API.
# For local development, this can be left unset as 'localhost' is allowed by default.
CORS_ALLOWED_ORIGIN="https://your-dashboard.com"

# Sets the single administrator account for the application.
# On server startup, the system ensures that the user with this email is the
# one and only administrator.
OVERRIDE_ADMIN_EMAIL="admin@example.com"


# -----------------------------------------------------------------------------
# SECTION 2: EMAIL SERVICE (STATIC CONFIGURATION)
# -----------------------------------------------------------------------------
# ⚠️  CRITICAL: This provider is selected HERE, not via the Dashboard.
# You must explicitly choose one option and provide its credentials.
#
# Available Options:
# - "sendgrid": Uses SendGrid (Requires SENDGRID_API_KEY).
# - "onesignal": Uses OneSignal Email (Requires ONESIGNAL_APP_ID & ONESIGNAL_REST_API_KEY).
# - "logging": Prints emails to server logs (Development only, no external calls).

# -----------------------------------------------------------------------------

# Select the email provider to use.
EMAIL_PROVIDER="sendgrid"

# --- SendGrid Configuration ---
# Required if EMAIL_PROVIDER="sendgrid".
SENDGRID_API_KEY="your-sendgrid-api-key"

# --- OneSignal Configuration ---
# Required if EMAIL_PROVIDER="onesignal".
# Ensure ONESIGNAL_APP_ID and ONESIGNAL_REST_API_KEY are set in Section 3.

# --- Common Email Settings ---
# The default email address to send emails from.
DEFAULT_SENDER_EMAIL="noreply@example.com"

# -----------------------------------------------------------------------------
# SECTION 3: PUSH NOTIFICATION PROVIDERS (DYNAMIC CONFIGURATION)
# -----------------------------------------------------------------------------
# ℹ️  NOTE: The active provider is selected dynamically via the Admin Dashboard.
# You must provide credentials below for ALL providers you want to be available.
# The server initializes every client that has valid credentials found here.
# -----------------------------------------------------------------------------

# --- Firebase Cloud Messaging (FCM) ---
# Required if you plan to use Firebase as your push provider.
FIREBASE_PROJECT_ID="your-firebase-project-id"
FIREBASE_CLIENT_EMAIL="your-firebase-client-email"
FIREBASE_PRIVATE_KEY="your-firebase-private-key"

# --- OneSignal ---
# Required if you plan to use OneSignal as your push provider.
# Note: For Android, OneSignal uses FCM infrastructure for delivery. You must
# configure your FCM Server Key in the OneSignal dashboard. However, this
# server only needs the OneSignal App ID and REST API Key to communicate
# with the OneSignal API.
ONESIGNAL_APP_ID="your-onesignal-app-id"
ONESIGNAL_REST_API_KEY="your-onesignal-rest-api-key"


# -----------------------------------------------------------------------------
# SECTION 4: SUBSCRIPTION & PAYMENT PROVIDERS (STATIC CONFIGURATION)
# -----------------------------------------------------------------------------
# These providers are standard per platform (Apple/Google) and are always active
# if credentials are provided. They are not toggled via the Dashboard.
# -----------------------------------------------------------------------------

# --- Apple App Store ---
APPLE_BUNDLE_ID="com.example.newsapp"
APPLE_APP_STORE_ISSUER_ID="your-app-store-connect-issuer-id"
APPLE_APP_STORE_KEY_ID="your-app-store-connect-key-id"
APPLE_APP_STORE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"

# --- Google Play Store ---
GOOGLE_PLAY_PACKAGE_NAME="com.example.newsapp"
# Note: Google Play validation uses the same Service Account credentials defined
# in SECTION 3 (FIREBASE_...). Ensure that Service Account has "View Financial Data"
# permissions in the Google Play Console.


# -----------------------------------------------------------------------------
# SECTION 5: ANALYTICS PROVIDERS (DYNAMIC CONFIGURATION)
# -----------------------------------------------------------------------------
# ℹ️  NOTE: The active provider is selected dynamically via the Admin Dashboard.
# Provide credentials below for ALL providers you want to support.
# -----------------------------------------------------------------------------

# --- Google Analytics (via Firebase) ---
# The ID of your Google Analytics 4 property.
# Note: This requires the Firebase credentials from Section 3 to be configured
# as it uses the same authentication mechanism.
GOOGLE_ANALYTICS_PROPERTY_ID="your-ga4-property-id"

# --- Mixpanel ---
# The Project ID for your Mixpanel project.
MIXPANEL_PROJECT_ID="your-mixpanel-project-id"
# The username for your Mixpanel service account.
MIXPANEL_SERVICE_ACCOUNT_USERNAME="your-mixpanel-service-account-username"
# The secret for your Mixpanel service account.
MIXPANEL_SERVICE_ACCOUNT_SECRET="your-mixpanel-service-account-secret"

# -----------------------------------------------------------------------------
# SECTION 6: API SECURITY & RATE LIMITING (OPTIONAL)
# Fine-tune security settings. Defaults are provided if these are not set.
# -----------------------------------------------------------------------------

# Limit for the /auth/request-code endpoint (requests per window). Defaults to 3.
# RATE_LIMIT_REQUEST_CODE_LIMIT=3

# Window for the /auth/request-code endpoint, in hours. Defaults to 24.
# RATE_LIMIT_REQUEST_CODE_WINDOW_HOURS=24

# Limit for the generic /data API endpoints (requests per window). Defaults to 1000.
# RATE_LIMIT_DATA_API_LIMIT=1000

# Window for the /data API endpoints, in minutes. Defaults to 60.
# RATE_LIMIT_DATA_API_WINDOW_MINUTES=60


# -----------------------------------------------------------------------------
# SECTION 7: ADVANCED & MISCELLANEOUS CONFIGURATION (OPTIONAL)
# -----------------------------------------------------------------------------

# The Template ID for the One-Time Password (OTP) email.
# Required for both SendGrid (Dynamic Template ID) and OneSignal (Template ID).
OTP_TEMPLATE_ID="d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# The duration for which a JWT is valid, in hours. Defaults to 720 (30 days).
# JWT_EXPIRY_HOURS="720"

# The base URL for the SendGrid API. Defaults to "https://api.sendgrid.com".
# Use "https://api.eu.sendgrid.com" for EU-based accounts.
# SENDGRID_API_URL="https://api.sendgrid.com"

# The cache duration for the CountryQueryService, in minutes. Defaults to 15.
# COUNTRY_SERVICE_CACHE_MINUTES=15
